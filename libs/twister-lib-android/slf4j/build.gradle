group = 'net.twisterrob'
version = '1.0'

apply plugin: 'net.twisterrob.android-library'
apply from: resources.text.fromInsecureUri("http://localhost/maven/configure.gradle")

dependencies {
	implementation "androidx.annotation:annotation:${VERSION_SUPPORT}"
	implementation "org.slf4j:slf4j-api:${VERSION_SLF4J}"
}

android {
	lintOptions {
		tasks.lint.enabled = false
	}
}

task jar(type: Jar, dependsOn: 'assembleRelease') {
	exclude "**/R.class"
	exclude "**/R\$*.class"
	exclude "**/BuildConfig.class"
	//from files(project.android.sourceSets.main.output)
}
afterEvaluate {
	com.android.build.gradle.LibraryExtension android = project.android
	android
			.libraryVariants
			.findAll { it.buildType.name == android.buildTypes.release.name }
			.each { tasks.jar.from(it.javaCompileProvider) }
}
artifacts {
	// reference as dependencies { runtimeOnly project(path: ':twister-lib-android-slf4j', configuration: 'jar') }
	configurations.create 'jar'
	add('jar', tasks.jar)
}
